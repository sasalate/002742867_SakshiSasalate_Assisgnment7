<!DOCTYPE html>
<html lang="en">

<head>
   <meta charset="UTF-8">
   <meta http-equiv="X-UA-Compatible" content="IE=edge">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Blog World</title>
   
   <link rel="stylesheet" href="./css/blog.css">
   <link rel="preload" as="style" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.13.0/css/all.min.css"
      onload="this.rel='stylesheet'">
</head>

<body id="bdy">
   <!-- Toggle -->
   <div id='main'>
      <input type="checkbox" id="theme">
      <a href="#" onclick="toggleTheme(theme)">
         <div id='moon'>
            <div id="moonspot1" class="spots"></div>
            <div id="moonspot2" class="spots"></div>
         </div>
      </a>
      <a href="#bdy" onclick="toggleTheme(theme)">
         <div id='cover'></div>
      </a>
   </div>

   <!-- END Toggle -->

   <main id="mainpage">
      <!-- Navigation -->
      <nav>
         <div class="hero">
            <div class="heroImg">
               <img src="./assets/B.png" alt="Hero Img" class="circle img profile" alt="">
            </div>
            <div class="heroTitle">
               <h1>Blog World</h1>
            </div>
         </div>
         <div class="getStarted">
            <span><i class="fa fa-search" aria-hidden="true"></i></span>
            <button id="getStarted" onclick="window.location='./login.html'">Log out</button>
         </div>
      </nav>
      <!-- END Navigation -->

      <!-- Welcome -->
      <section id="welcome">
         <h2>Welcome <strong id="loggedName"></strong>, Explore Some Blogs !</h2>
         <span>The good news about computers is that they do what you tell them to do. The bad news is that they do what
            you tell them to do.</span>
      </section>
      <!-- END Welcome -->

      <!-- Search -->
      <div class="box">
         <input type="text"  placeholder="Enter a Keyword or Topic names to search Articles...">
         <button>Find</button>
      </div>
      <!-- END Search -->

      <!-- Social -->
      <section class="social">
         <a href="#" target="_blank"><i class="fab fa-instagram"
               aria-hidden="true"></i></a>
         <a href="#" target="_blank"><i class="fab fa-facebook-f"
               aria-hidden="true"></i></a>
         <a href="https://twitter.com/i_am_harshal27" target="_blank"><i class="fab fa-twitter"
               aria-hidden="true"></i></a>
         <a href="https://github.com/Harshal277" target="_blank"><i class="fab fa-github" aria-hidden="true"></i></a>
         <a href="https://www.linkedin.com/in/imharshal27" target="_blank"><i class="fab fa-linkedin"
               aria-hidden="true"></i></a>
      </section>
      <!-- END Social -->

      <section class="articleSection">
         <div class="fullarticle">
            <div class="fullarticleblur">
               <div class="apic">
                  <img id="fullimg" src="./assets/monocraft_font_1-760x380.png">
               </div>
               <div class="apublish">
                  <b id="apubcompany" class="apubcompany">Ars Technica</b>
                  <span id="apublabel" class="apublabel">2022-09-07</span>
               </div>
               <div class="atitledec">
                  <h4 id="fulltitle">Developer creates delightful programming font based on Minecraft</h4>
                  <span id="fulldesc">"The font for developers who like Minecraft a bit too much."</span>
               </div>
               <div class="apostedby">
                  <div id="getProfile" class="profileimg">
                     <img id="profilepic" alt="profile pic" loading="lazy" src="./assets/profile 3.jpg"
                        class="circle img profile" alt="">
                  </div>
                  <span id="fullauthor">Benj Edwards</span>
               </div>
            </div>
         </div>
         <div id="articlelist" class="articlelist">
            <!-- From api -->
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/1662150158-Ent-PythonCoding.jpeg" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Lifehacker.com</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>Learn The World's Most Popular Programming Language</h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/entrepreneurship.webp" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Lifehacker.com</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>In human-centered AI, UX and software roles are evolving
                     </h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/OK.png" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Lifehacker.com</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>The OK? Programming Language
                     </h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/1661280130-Ent-GoogleGoProgramming.jpeg" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Entrepreneur</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>How to Learn Google's Programming Language Online for Just $14
                     </h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/GettyImages-1224500457-e1643727629417.webp" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Entrepreneur</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>Abstraction in programming: Taming the ones and zeros
                     </h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/61fa7f444faa730018ff6672.webp" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Business Insider</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>28 of Udemy's most popular online courses, from bestselling coding bootcamps to in-depth drawing</h4>
                  </div>
               </div>
            </div>
            <div class="cardA">
               <div class="cardAImg">
                  <img src="./assets/1662150750-Ent-Perlego.jpeg" alt="" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">Business Insider</b>
                     <span class="apublabel">2021-09-11</span>
                  </div>
                  <div class="atitledec">
                     <h4>Access Thousands of Best-Seller Books for a Fraction of the Price
                     </h4>
                  </div>
               </div>
            </div>
         </div>
      </section>

      <footer>
         <div class="counter">
            <div class="circleShape">
               <h6>Total Visits</h6>
               <strong id="tolVisits">100</strong>
            </div>
            <div class="circleShape">
               <h6>Total Users</h6>
               <strong id="tolUsers">100</strong>
            </div>
         </div>

         <div class="feedback" id="feedback">
            <h4>Feedback</h4>
            <div class="group" id="feedgroup">
               <input type="text" id="fname" placeholder="Name">
               <input type="text" id="sugg" placeholder="Suggetions">
               <button onclick="saveFeedback(fname.value, sugg.value)">Feedback</button>
            </div>
         </div>
         <div class="info">
            <b>Designed and developed by</b>
            <div class="apostedby">
               <div class="profileCard">
                  <div id="getProfile" class="profileimg">
                     <img id="profilepic" alt="profile pic" loading="lazy" src="./assets/profile 3.jpg"
                        class="circle img profile" alt="">
                  </div>
                  <span>Harshal Chougule</span>
               </div>
               <p>&#9;Created using HTML5, CSS3, Javascript, font awosome for icons and NewsAPI for articles</p>
            </div>
            <section class="social">
               <a href="https://www.instagram.com/i_m_harshal27/" target="_blank"><i class="fab fa-instagram"
                     aria-hidden="true"></i></a>
               <a href="https://www.facebook.com/harshal.chougule.16/" target="_blank"><i class="fab fa-facebook-f"
                     aria-hidden="true"></i></a>
               <a href="https://twitter.com/i_am_harshal27" target="_blank"><i class="fab fa-twitter"
                     aria-hidden="true"></i></a>
               <a href="https://github.com/Harshal277" target="_blank"><i class="fab fa-github"
                     aria-hidden="true"></i></a>
               <a href="www.linkedin.com/in/imharshal27" target="_blank"><i class="fab fa-linkedin"
                     aria-hidden="true"></i></a>
            </section>
         </div>
         <div class="copyright mobile">
            <span>&copy; Harshal Chougule</span>
         </div>
      </footer>
   </main>

   <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-app.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-database.js"></script>
   <script src="https://www.gstatic.com/firebasejs/8.0.0/firebase-auth.js"></script>

   <script>
      console.log($(document).height())
      console.log($('#box-area').height())

      $("#box-area").css("height", $(document).height());
      console.log($('#box-area').height())

      $('#closepop').click(function (e) {
         $('#popuplogin').hide(500);
      });

      $('#getStarted').click(function (e) {
         $('#popuplogin').show(400);
         $('#popuplogin').css('display', 'flex');
      });
   </script>
   <script>
      var firebaseConfig = {
         apiKey: "AIzaSyA9WYAGrKKB6YytrlTCHIH8eMDvna_bIhc",
         authDomain: "blogs-f4ef7.firebaseapp.com",
         projectId: "blogs-f4ef7",
         storageBucket: "blogs-f4ef7.appspot.com",
         messagingSenderId: "393216256854",
         appId: "1:393216256854:web:fd17c081a9f34f6e7a44f7",
         databaseURL: "https://blogs-f4ef7-default-rtdb.firebaseio.com"
      };
      firebase.initializeApp(firebaseConfig);

      var providerGoogle = new firebase.auth.GoogleAuthProvider();
      var providerFacebook = new firebase.auth.FacebookAuthProvider();

      function loginWithGoogle() {
         firebase.auth().signInWithPopup(providerGoogle).then(res => {
            console.log(res)
            showProfile(res.additionalUserInfo)
         }).catch(e => {
            console.log(e);
         })
      }

      function loginWithFacebook() {
         // appsecret - 0dc21c9ddaa23adfb464ab96cb3fc3f9
         // callback https://blogs-f4ef7.firebaseapp.com/__/auth/handler

         providerFacebook.addScope('user_birthday');
         providerFacebook.setCustomParameters({
            'display': 'popup'
         });

         firebase.auth().signInWithPopup(providerFacebook).then(function (res) {
            var token = res.credential.accessToken;
            showProfile(res)
         }).catch((error) => {
            var errorCode = error.code;
            var errorMessage = error.message;
            var email = error.email;
            var credential = error.credential;
         });
      }

      function showProfile(user) {
         $('#popuplogin').hide(500);
         $('#getStarted').hide(500);
         $('#getProfile').show(200);

         document.getElementById('profilepic').src = user.photoURL;
         document.getElementById('loggedName').innerText = user.displayName;
         localStorage.setItem('loggedName', user.displayName)
         localStorage.setItem('loggedEmail', user.email)
         console.log(user)
      }
      function checkAuthState() {
         firebase.auth().onAuthStateChanged(user => {
            if (user) {
               showProfile(user)
            } else {
               $('#popuplogin').show(300);
               $("#popuplogin").css("display", "flex");
               $('#getProfile').hide(200);
               console.log("user not logged");
            }
         })
      }
      checkAuthState()
      function logout() {
         firebase.auth().signOut().then(() => {
            $('#getProfile').show(200);
            $("#getProfile").css("display", "inline-flex");
            // document.getElementById("profileInfo").style.display = "none";
            // document.getElementById("loginScreen").style.display = "block";
            $('#popuplogin').hide(300);
            
            document.getElementById("dropLogout").classList.remove('show');
            console.log("logout");
            window.localStorage.removeItem("loggedEmail"); 
            window.localStorage.removeItem("loggedName"); 
         }).catch(e => {
            console.log(e)
         })
      }

      // update counter
      firebase.database().ref('/visitcount').on('value', function (snapshot) {
         localStorage.setItem('totalvisits', snapshot.val().vcount);
      });
      updateFirebaseVisitCount(parseInt(localStorage.getItem('totalvisits')) + 1)
      function updateFirebaseVisitCount(vcount) {
         firebase.database().ref('/').update({
            visitcount: { vcount }
         });
         localStorage.setItem('totalvisits', vcount);
      }
   </script>
   <script>
      var togglecheck = document.getElementById("theme")
      var root = document.querySelector(':root');

      function getArticlesData(topic) {
         // var url = "https://newsapi.org/v2/everything?q=programming&apiKey=109c3dc3da2d4f21b12c6f05143f5280"
         var url = "https://newsapi.org/v2/everything?q='" + topic + "'&apiKey=109c3dc3da2d4f21b12c6f05143f5280"
         $.get(url, (response) => {
            // console.log(response.articles);
            updateMainArticle(response.articles[0]);
            updateArticleList(response.articles);
         })
      }
      getArticlesData('programming');

      function updateMainArticle(article) {
         document.getElementById('fullimg').src = article.urlToImage;
         document.getElementById('fullimg').alt = article.title;
         document.getElementById('apublabel').innerText = article.publishedAt.slice(0, 10);
         document.getElementById('apubcompany').innerText = article.source.name;
         document.getElementById('fulltitle').innerText = article.title;
         document.getElementById('fulldesc').innerText = article.description;
         document.getElementById('fullauthor').innerText = article.author;
      }
      function updateArticleList(articles) {
         articlelist.innerHTML = '';
         for (var a = 1; a < 11; a++) {
            articlelist.innerHTML += `
            <div class="cardA">
               <div class="cardAImg">
                  <img src="${articles[a].urlToImage}" alt="${articles[a].title}" loading="lazy">
               </div>
               <div class="cardADesc">
                  <div class="apublish">
                     <b class="apubcompany">${articles[a].source.name}</b>
                     <span class="apublabel">${articles[a].publishedAt.slice(0, 10)}</span>
                  </div>
                  <div class="atitledec">
                     <h4>${articles[a].title}</h4>
                  </div>
               </div>
            </div>
            `;
         }
      }

      function saveFeedback(name, sugg) {
         firebase.auth().onAuthStateChanged(user => {
            if (user) {
               firebase.database().ref('feedback/' + localStorage.getItem('totalvisits')).set({
                  Name: name,
                  Email: localStorage.getItem('loggedEmail'),
                  Suggestion: sugg
               }, function (error) {
                  if (error != null) {
                     document.getElementById("feedback").innerHTML = `
                        <div class='thankyou'>
                           <h5>Can't give feedback right now !</h5>
                           <p>Check whether you are logged in or not</p>
                           <img src='./assets/smile.svg'>
                        </div>
                     `;
                  } else {
                     document.getElementById("feedback").innerHTML = `
                        <div class='thankyou'>
                           <h5>Thankyou for your Feedback</h5>
                           <img src='./assets/smile.svg'>
                        </div>
                     `;
                  }
               });
            } else {
               $('#popuplogin').show(300);
               $("#popuplogin").css("display", "flex");
               $('#getProfile').hide(200);
               window.scrollTo(0, 0);
            }
         })

      }
      $('#getProfile').click(function (e) {
         if (document.getElementById("dropLogout").classList.contains('show')) {
            document.getElementById("dropLogout").classList.remove('show');
         } else {
            document.getElementById("dropLogout").classList.add("show");
         }
      });

      if (localStorage.getItem("theme") == "dark") {
         root.style.setProperty('--background', '#001');
         root.style.setProperty('--backgroundglass', '#0000119e');
         root.style.setProperty('--text', '#e7e7e7eb');
         root.style.setProperty('--bgcol', '#5c5c5c40');
         root.style.setProperty('--iconsbg', '#f0f2f512');
         root.style.setProperty('--ipbg', '#f0f2f512');
         root.style.setProperty('--titleCol', '#d5d5d5f0');
         root.style.setProperty('--focusip', '#f0f2f524');
         theme.checked = false
      } else {
         root.style.setProperty('--background', '#fff');
         root.style.setProperty('--backgroundglass', '#ffffff82');
         root.style.setProperty('--text', '#1c1a1f');
         root.style.setProperty('--bgcol', '#e9eef3bb');
         root.style.setProperty('--iconsbg', '#f0f2f5c7');
         root.style.setProperty('--ipbg', '#dfe1e3a6');
         root.style.setProperty('--titleCol', '#040404');
         root.style.setProperty('--focusip', '#3574d324');
         theme.checked = true
      }
      function toggleTheme(theme) {
         if (theme.checked) {
            root.style.setProperty('--background', '#001');
            root.style.setProperty('--backgroundglass', '#0000119e');
            root.style.setProperty('--text', '#e7e7e7eb');
            root.style.setProperty('--bgcol', '#e9eef3bb');
            root.style.setProperty('--titleCol', '#d5d5d5f0');
            root.style.setProperty('--iconsbg', '#f0f2f512');
            root.style.setProperty('--ipbg', '#f0f2f512');
            root.style.setProperty('--focusip', '#f0f2f524');
            localStorage.setItem("theme", "dark")
            theme.checked = false
         } else {
            root.style.setProperty('--background', '#fff');
            root.style.setProperty('--backgroundglass', '#ffffff82');
            root.style.setProperty('--text', '#1c1a1f');
            root.style.setProperty('--bgcol', '#5c5c5c40');
            root.style.setProperty('--iconsbg', '#f0f2f5c7');
            root.style.setProperty('--titleCol', '#040404');
            root.style.setProperty('--ipbg', '#dfe1e3a6');
            root.style.setProperty('--focusip', '#3574d324');
            localStorage.setItem("theme", "light")
            theme.checked = true
         }
      }
      function search() {
         $('#searchboxip').focus();
      }
      function animateValue(obj, start, end, duration) {
         let startTimestamp = null;
         const step = (timestamp) => {
            if (!startTimestamp) startTimestamp = timestamp;
            const progress = Math.min((timestamp - startTimestamp) / duration, 1);
            obj.innerHTML = Math.floor(progress * (end - start) + start);
            if (progress < 1) {
               window.requestAnimationFrame(step);
            }
         };
         window.requestAnimationFrame(step);
      }

      const tolVisits = document.getElementById("tolVisits");
      const tolUsers = document.getElementById("tolUsers");
      animateValue(tolVisits, 0, localStorage.getItem('totalvisits'), 3000);
      animateValue(tolUsers, 0, 14, 3000);
   </script>
</body>

</html>